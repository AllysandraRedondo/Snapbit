<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Circle Swiper</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.css">
  <style>
    * {
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }
    body {
        text-align: center;
        font-family: Arial, sans-serif;
        background-color: #DFEBFD;
        margin: 0;
        padding: 0;
    }

    .top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
    }

    .number {
        font-size: 45px;
        font-weight: bold;
        color: black;
        margin-left: 50px;
    }

    .right {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 30px;
        margin-right: 40px;
    }

    .help {
        border-radius: 100%;
        background-color: white;
        width: 70px;
        height: 70px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 35px;
        font-weight: bold;
        color: #000;
        cursor: pointer;
        -webkit-text-fill-color: transparent;
        -webkit-text-stroke-width: 2px;
    }

    .menu {
        cursor: pointer;
    }

    .menu div {
        height: 8px;
        background-color: white;
        margin: 10px 0;
        width: 70px;
        border-radius: 100px;
    }
    /* ------------SIDE MENU--------------- */
.sidemenu {
  position: fixed;
  top: 0;
  right: -750px;
  width: auto; /* let its children define size */
  height: 100%;
  background: none; /* no bg here, let content handle it */
  transition: right 0.3s ease-in-out;
  z-index: 2000;
}
/* -------------------------YUNG PANG EXIT----------------------------- */
.semicircle {
  width: 110px;
  height: 90px;
  background: #697D9B;
  border-radius: 100px 0 0 100px;
  display: flex;
  justify-content: center;
  align-items: center;
  align-self: flex-start; /* ✅ keeps it at top */
}
.semicircle button {
  width: 80px;
  height: 80px;
  background-color: #697D9B;
  border: none;
  border-radius: 50%;
  cursor: pointer;
}

.semicircle img {
  width: 70px;
  height: 70px;
  border-radius: 50%;
}
.side-wrapper {
  display: flex;
  align-items: flex-start; /* Keep at top */
  height: 100%;
}

/* -------------------------YUNG AI AT BG AND CAMERA EFFECT----------------------------- */

.content {
  width: 600px;
  height: 100%;
  background-color: #697D9B;
  padding: 20px;
  overflow-y: auto;
  overflow-x: hidden;
}
/* -------------------------YUNG BG AND CAMERA EFFECTS----------------------------- */

    .design {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin-top: 70px;
    }
/* -------------------------YUNG CAROUSEL PARA GUMALAW YUNG MGA BILOG----------------------------- */

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 600px;
      position: relative;
    }

    .swiper {
      width: 80%;
      max-width: 500px;
      margin-bottom: 35px;
    }

    .swiper-slide {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .swiper-slide button {
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
    }

    .swiper-slide img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }

    .swiper-slide img:hover {
      border: 2px solid #2196f3;
    }

/* -------------------------YUNG PANG NEXT AND PREV----------------------------- */

    .swiper-button-prev, .swiper-button-next {
      width: 80px;
      height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      color: wheat;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 10;
      margin-top: -20px;
    }
    .swiper-button-prev i{
        margin-left: 80px;
    }
    .swiper-button-next i {
        margin-right: 80px;
    }
    .swiper-button-prev i,
    .swiper-button-next i {
      font-size: 4rem;
      color: wheat;
    }


    .swiper-button-prev {
      left: -70px; 
    }

    .swiper-button-next {
      right: -70px; 
    }

    .swiper-button-prev::after, .swiper-button-next::after {
      display: none;
    }

    .bg-txt p {
        font-size: 30px;
        margin-left: 20px;
        margin-bottom: 25px;
        margin-top: 20px;
    }

/* -------------------------YUNG AI----------------------------- */
/* ----------YUNG PREVIEW------------- */
        .preview{
        margin-top: 30px;
    }
        .picture{
            width: 500px;
            height: 250px;
            background-color: white;
        }
        .preview-button{
            margin-left: 350px;
            margin-top: 20px;
        }
            .view-button{
                width: 150px;
                height: 50px;
                background-color: EAF2FE;
                border-radius: 100px;
            }
/* ----------YUNG PANG PROMPT------------- */          
    .ai-prompt{
        margin-top: 30px;
    }
        .ai-center{
            display: flex;
            justify-content: center;
            align-items: center;
                }
            .ai{
                background-color: white;
                width: 500px;
                height: 100px;
                border-radius: 20px;
                margin-top: 50px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
                .prompt{
                    border: none;
                    width: 450px;
                    height: 50px;
                }
        .ai-button{
            margin-left: 350px;
            margin-top: 20px;
        }
            .prompt-button{
                width: 150px;
                height: 50px;
                background-color: EAF2FE;
                border-radius: 100px;
            }
  /* -----------------------YUNG CAMERA---------------------------- */
  .camera {
  margin-top: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%; /* ✅ Give it a starting width */
  transition: transform 0.3s ease-in-out, width 0.5s ease-in-out;
}

/* Video element for smooth scaling */
.camera video {
  width: 900px;   /* original size */
  height: 550px;
  transition: transform 0.5s ease-in-out;
    transform: scaleX(-1);
}
.menu-open .camera {
  transform: translateX(-300px); /* ✅ Move smoothly left */
}
.menu-hide .camera {
  transform: translateX(0px); /* ✅ Move smoothly left */
}
  </style>
</head>
<body>

        <div class="top">
        <div class="left">
            <div class="number">0/3</div>
        </div>
        <div class="right">
            <div class="reminder">
                <div class="help" onclick="window.location.href='help.html'">?</div>
            </div>
            <div class="menu" onclick="show()">
                <div class="one"></div>
                <div class="two"></div>
                <div class="three"></div>
            </div>
        </div>
    </div>
  <!-- YUNG CAMERA -->
    <div class="center">
        <div class="camera">
            <video id="video" autoplay playsinline></video>
        </div>
          <div id="countdown"></div>
  <button id="captureBtn">Start Capture</button>

  <div class="preview-container" id="previewContainer"></div>
    </div>
<!-- YUNG BUONG SIDE MENU -->
<div class="right-content">
  <div class="sidemenu" id="sidemenu">
    <div class="side-wrapper">
      <div class="semicircle">
          <button class="exit" onclick="hide()"><img src="Images/reject.png"></button>
      </div>
      <div class="content">
        <div class="preview">
            <canvas class="picture"></canvas>
            <div class="preview-button">
                <button class="view-button">Paste</button>
            </div>
        </div>
        <div class="ai-prompt">
            <div class="ai-center">
              <div class="ai">
                  <input class="prompt">
              </div>
            </div>
            <div class="ai-button">
                <button class="prompt-button">Prompt</button>
            </div>
        </div>
    <div class="design">
        <!-- BACKGROUND Swiper --> 
    <div class="background">
        <div class="bg-txt"><p>Background</p></div>
        <section class="container">
        <div class="swiper-button-prev background-prev"><i class="ri-arrow-left-s-line"></i></div>
        <div class="swiper card__container1">
            <div class="swiper-wrapper">
            <div class="swiper-slide"><button><img src="Images/backgrounds/bg1.jpg"></button></div>
            <div class="swiper-slide"><button><img src="Images/backgrounds/bg2.jpg"></button></div>
            <div class="swiper-slide"><button><img src="Images/backgrounds/bg3.jpg"></button></div>
            <div class="swiper-slide"><button><img src="Images/backgrounds/bg4.jpg"></button></div>
            <div class="swiper-slide"><button><img src="Images/backgrounds/bg5.jpg"></button></div>
            </div>
        </div>
        <div class="swiper-button-next background-next"><i class="ri-arrow-right-s-line"></i></div>
        </section>
        </div>
            <!-- Camera Effects -->
        <div class="effects">
            <div class="bg-txt"><p>Camera Effects</p></div>
            <section class="container">
            <div class="swiper-button-prev effects-prev"><i class="ri-arrow-left-s-line"></i></div>
            <div class="swiper card__container2">
                <div class="swiper-wrapper">
                <div class="swiper-slide"><button><img src="Images/backgrounds/bg1.jpg"></button></div>
                <div class="swiper-slide"><button><img src="Images/backgrounds/bg2.jpg"></button></div>
                <div class="swiper-slide"><button><img src="Images/backgrounds/bg3.jpg"></button></div>
                <div class="swiper-slide"><button><img src="Images/backgrounds/bg4.jpg"></button></div>
                <div class="swiper-slide"><button><img src="Images/backgrounds/bg5.jpg"></button></div>
                </div>
            </div>
            <div class="swiper-button-next effects-next"><i class="ri-arrow-right-s-line"></i></div>
            </section>
        </div>
    </div>
    </div>
  </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
// -------------------------------PARA MAG PICTURE YUNG CAMERA------------------------------------
const video = document.getElementById('video');
const countdown = document.getElementById('countdown');
const captureBtn = document.getElementById('captureBtn');
const previewContainer = document.getElementById('previewContainer');
const capturedImages = [];

navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
  .then(stream => video.srcObject = stream)
  .catch(() => alert("Camera not available."));

function countdownTimer(seconds) {
  return new Promise(resolve => {
    let time = seconds;
    countdown.textContent = time;
    const interval = setInterval(() => {
      time--;
      countdown.textContent = time;
      if (time <= 0) {
        clearInterval(interval);
        countdown.textContent = '';
        resolve();
      }
    }, 1000);
  });
}

async function startCapture() {
  captureBtn.disabled = true;

  for (let i = 0; i < 2; i++) {
    await countdownTimer(3);

    const canvas = document.createElement('canvas');
    canvas.width = 300;
    canvas.height = 225;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    const imageData = canvas.toDataURL("image/png");
    capturedImages.push(imageData);

    const img = document.createElement('img');
    img.src = imageData;
    previewContainer.appendChild(img);
  }

  localStorage.setItem('capturedPhotos', JSON.stringify(capturedImages));
  window.location.href = "design.html" 
}

captureBtn.addEventListener('click', startCapture);

// -------------------------------PARA MAG SHOW SIDE MENU------------------------------------
  function show() {
  const sidemenu = document.getElementById("sidemenu");
  const body = document.body;

  if (sidemenu.style.right === "0px") {
    sidemenu.style.right = "-750px";  // Hide menu
    body.classList.remove("menu-open"); // Remove shrink effect
  } else {
    sidemenu.style.right = "0px";     // Show menu
    body.classList.add("menu-open");  // Apply shrink effect
  }
}
// -------------------------------PARA MAG HIDE SIDE MENU------------------------------------

function hide() {
  const sidemenu = document.getElementById("sidemenu");
  const body = document.body;

  sidemenu.style.right = "-750px";     
  body.classList.remove("menu-open");  // ✅ Always remove class
}
// -------------------------------PARA SA CAUROSEL------------------------------------

  let swiperCards1 = new Swiper(".card__container1", {
    loop: true,
    spaceBetween: 20,
    grabCursor: true,
    navigation: {
      nextEl: ".background-next",
      prevEl: ".background-prev",
    },
    breakpoints: {
      0: { slidesPerView: 1 },
      600: { slidesPerView: 2 },
      968: { slidesPerView: 4 },
    },
  });
    let swiperCards2 = new Swiper(".card__container2", {
    loop: true,
    spaceBetween: 20,
    grabCursor: true,
    navigation: {
      nextEl: ".effects-next",
      prevEl: ".effects-prev",
    },
    breakpoints: {
      0: { slidesPerView: 1 },
      600: { slidesPerView: 2 },
      968: { slidesPerView: 4 },
    },
  });

</script>
</body>
</html>
